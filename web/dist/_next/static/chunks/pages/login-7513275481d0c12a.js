(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3700:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(8409)}])},8409:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5893),s=n(1163),a=n.n(s),o=n(7294),i=n(9734),l=n(8945),c={current:async()=>{let e=window.localStorage.getItem("user"),t=null==e?void 0:e.token;try{let n=await l.Z.get("/user",{headers:{Authorization:"Token ".concat(encodeURIComponent(t))}});return n}catch(r){return r}},login:async(e,t)=>{try{let n=await l.Z.post("/api/auth/password/login",JSON.stringify({email:e,password:t}),{headers:{"Content-Type":"application/json"}});return n}catch(r){return r}},register:async(e,t,n)=>{try{let r=await l.Z.post("/api/users",JSON.stringify({user:{username:e,email:t,password:n}}),{headers:{"Content-Type":"application/json"}});return r}catch(s){return s}},save:async e=>{try{let t=await l.Z.put("/api/user",JSON.stringify({user:e}),{headers:{"Content-Type":"application/json"}});return t}catch(n){return n}}},u=n(1664),d=n.n(u);let p=()=>{let[e,t]=o.useState(!1),[n,s]=o.useState([]),[l,u]=o.useState(""),[p,h]=o.useState(""),g=o.useCallback(e=>u(e.target.value),[]),w=o.useCallback(e=>h(e.target.value),[]),j=async e=>{e.preventDefault(),t(!0),console.log("Email: ",l),console.log("Password: ",p);try{let{data:n,status:r}=await c.login(l,p);200!==r&&s(n),(null==n?void 0:n.data)&&(window.localStorage.setItem("user",JSON.stringify(n.data)),console.log(n),(0,i.JG)("user",null==n?void 0:n.data),a().push("/"))}catch(o){console.error(o)}finally{t(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{onSubmit:j,children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"email",onChange:g})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"password",onChange:w})]}),(0,r.jsx)("p",{children:(0,r.jsx)("button",{children:"Login"})})]}),(0,r.jsxs)("p",{children:["Don't have an account? ",(0,r.jsx)(d(),{href:"/register",children:"Register"})]}),(0,r.jsx)("p",{children:(0,r.jsx)(d(),{href:"/password/reset",children:"Forgot password?"})})]})};function h(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p,{})})}},1163:function(e,t,n){e.exports=n(880)}},function(e){e.O(0,[945,774,888,179],function(){return e(e.s=3700)}),_N_E=e.O()}]);